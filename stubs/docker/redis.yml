# Docker Compose configuration for Redis cache
# Generated by PhpHive CLI
#
# Services:
# - redis: Redis 7 in-memory data store
#
# Usage:
#   docker compose up -d    # Start services
#   docker compose down     # Stop services
#   docker compose logs     # View logs
#
# Access:
#   Redis: localhost:6379

version: "3.8"

services:
  # Redis Cache Service
  redis:
    image: redis:7-alpine
    container_name: "{{CONTAINER_PREFIX}}-redis"
    restart: unless-stopped
    command: redis-server --requirepass {{REDIS_PASSWORD}} --appendonly yes
    ports:
      - "{{REDIS_PORT}}:6379"
    volumes:
      - "{{VOLUME_PREFIX}}-redis-data:/data"
    networks:
      - "{{NETWORK_NAME}}"
    healthcheck:
      test: ["CMD", "redis-cli", "--raw", "incr", "ping"]
      interval: 10s
      timeout: 5s
      retries: 5

# Named volumes for data persistence
volumes:
  "{{VOLUME_PREFIX}}-redis-data":
    driver: local

# Network for service communication
networks:
  "{{NETWORK_NAME}}":
    driver: bridge
